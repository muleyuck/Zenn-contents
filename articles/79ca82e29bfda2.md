---
title: "ワンライナーコマンドのスニペットCLIツール「linippet」のご紹介"
emoji: "🍾"
type: "tech"
topics: ["cli", "go", "shell", "bash", "zsh"]
published: true
---

## はじめに

普段開発をしていると、よく使うコマンドや長いオプションを持つコマンドを何度も入力することがあると思います。
よく使うコマンドは履歴に残っていますがたまに利用するコマンドだと履歴から消えていてコマンドを調べるのが手間でした。
シェルのエイリアスを設定という手もありますが、他コマンドと競合する可能性もあって避けたいことも多いのではないでしょうか。

今回は、そんな課題を解決するために作成した **linippet** というコマンドスニペット管理CLIツールを紹介します。

https://github.com/muleyuck/linippet


## 動作デモ

ファイル名を受け取ってcatするスニペットを選択してREADME.mdを表示するデモです。
![デモ](/images/articles/linippet_demo.gif)

## linippetの基本機能

linippetは、bash/zsh向けのコマンドスニペットをTUIで管理・実行できるCLIツールです。

主な特徴は以下の通りです

- TUIでスニペットを選択・実行
- 動的な引数のサポート（`${{argument}}` 形式）
- スニペットのCRUD操作
- キーバインドでの起動
- あいまい検索によるスニペット選択


## インストール方法

### 1. バイナリのインストール


**Homebrew経由**

```sh
brew install muleyuck/tap/linippet
```
**Go経由**

```sh
go install github.com/muleyuck/linippet@latest
```

または、[Releases](https://github.com/muleyuck/linippet/releases)から直接バイナリをダウンロードすることも可能です。

### 2. シェルのセットアップ

zshの場合:

```sh
eval "$(linippet init zsh)"
```

bashの場合:

```sh
eval "$(linippet init bash)"
```

上記のコマンドを `.zshrc` または `.bashrc` に追加してください。

## 基本的な使い方

### スニペットの作成

以下のコマンドでスニペットを登録します。

```sh
linippet create
```

TUIのモーダルが表示されるので、登録したいコマンドを入力します。

ここでは、Dockerコンテナを起動するコマンドを登録してみます

```
docker run -it --rm ubuntu:latest /bin/bash
```

### スニペットの選択と実行

登録したスニペットを選択して実行するには、`lip` コマンドでスニペット一覧が表示されます

```sh
lip
```

TUIで表示されたスニペット一覧から実行したいスニペットを選択するとそのままシェルで実行されます。

### スニペットの編集・削除

登録したスニペットは、以下のコマンドで編集・削除できます：

```sh
# 編集
linippet edit

# 削除
linippet remove
```

## 動的な引数の使い方

linippetのメイン機能の一つとして動的な引数を受け取ることができます。

例えば、Gitのブランチを切り替えるコマンドを登録します

```
git checkout ${{branch_name}}
```

このスニペットを選択すると、TUIで `branch_name` の入力を求められます。入力した値が `${{branch_name}}` の部分に置き換わります。

この機能により、汎用的なスニペットを作成できて、いくつもコマンドを登録する手間を省いています。

## キーバインドでの起動

環境変数 `LINIPPET_TRIGGER_BIND_KEY` を設定することで、特定のキーバインドでlinippetを起動できます。

例えば、`Ctrl+o` で起動したいとすると、以下のように環境変数を設定します

```sh
export LINIPPET_TRIGGER_BIND_KEY="^o"
```

この状態でコマンドライン上で `Ctrl+o` を押すと、linippetが起動し、選択したスニペットが現在のreadlineに設定されます。
これにより、実行前にコマンドを確認・編集できるので、より柔軟な運用が可能です。

## その他の便利な機能

### スニペット一覧の表示

登録されているスニペットの一覧を確認するコマンドも用意しています。

```sh
linippet --list
# または
linippet -l
```

## 想定ユースケース

実際の開発でlinippetが役立つシーンをいくつか紹介します：

### 1. Dockerコマンド

```
docker run -it --rm -v $(pwd):/workspace ${{image_name}} /bin/bash
```

よく使うDockerの起動コマンドを登録しておき、イメージ名だけを変更して実行できます。

### 2. Gitコマンド

```
git log --oneline --graph --decorate --all -n ${{number}}
```

Gitのログを見やすく表示するコマンドを登録し、表示件数を動的に指定できます。

### 3. SSH接続

```
ssh -i ~/.ssh/${{key_file}} user@${{host}}
```

複数のサーバーに接続する際、鍵ファイルとホスト名を毎回入力できます。

### 4. データベース操作

```
psql -h ${{host}} -U ${{user}} -d ${{database}}
```

PostgreSQLへの接続コマンドを登録しておけば、環境ごとに素早く接続できます。

## おわりに

linippetは、日々の開発で繰り返し使うコマンドを効率的に管理・実行したいという思いから作成しました

- よく使うコマンド履歴ではなく明示的に登録しておきたい
- コマンドに汎用性を持たせて効率よく呼び出したい

このような願望をお持ちの方には便利なツールかなと思いますので、もしよければ一度使ってみてください。
もちろんフィードバックやコントリビュートも大歓迎です！

https://github.com/muleyuck/linippet

