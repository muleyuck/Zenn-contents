---
title: "ã€Next.jsã€‘Typescriptã®getStaticPropsã¨getStaticPathså‹å®šç¾©ã‚’ç†è§£ã™ã‚‹"
emoji: "ğŸ•Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [next, Typescript, React, Javascript]
published: false
---

# ã¯ã˜ã‚ã«

`Next.js`ã§å‹•çš„ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã™ã‚‹æ™‚ãªã©ã«`getStaticProps`ã‚„`getStaticPaths`ã‚’æ‰±ã†ã®ã§ã™ãŒã€`Typescript`ã§ã¯ã©ã†ã‚„ã£ã¦å‹å®šç¾©ã™ã‚‹ã®ã‹ç†è§£ã§ãã¦ã„ãªã„ã‹ã£ãŸã®ã§ã¾ã¨ã‚ã¦ã„ãã¾ã™ã€‚

# getStaticProps

ã“ã“ã§ã¯`getStaticProps`ã§[id]ã‹ã‚‰å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã—è¡¨ç¤ºã™ã‚‹ã€ã¨ã„ã†å‹•çš„ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã—ã¦ã„ãã¾ã™ã€‚

```Typescript:[id].tsx
import {
  GetStaticProps,
  GetStaticPropsContext,
  InferGetStaticPropsType,
  NextPage,
} from "next";
import getUser from "services";
import { User } from "types";

type TestPageProps = InferGetStaticPropsType<typeof getStaticProps>;

const TestPage: NextPage<TestPageProps> = (props: TestPageProps) => {
  const { id, name, email } = props;

  return (
    <>
      <div>IDï¼š{id}</div>
      <div>ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼š{name}</div>
      <div>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼š{email}</div>
    </>
  );
};

export const getStaticProps: GetStaticProps = async ({
  params,
}: GetStaticPropsContext) => {
  const user: User = getUser(params!.id);

  return {
    props: {
      id: user.id,
      name: user.username,
      email: user.email,
    },
  };
};

export default TestPage;
```

`getStaticProps`ã§è¿”å´ã—ãŸå‹`GetStaticProps`ã‚’ Page ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§å—ã‘å–ã‚‹ãŸã‚ã«`InferGetStaticPropsType`ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚

```Typescript
type TestPageProps = InferGetStaticPropsType<typeof getStaticProps>;
```

ã“ã‚Œã«ã‚ˆã£ã¦`getStaticProps`ã®è¿”å´å‹ã«ã‚ˆã£ã¦å‹•çš„ã«å‹å®šç¾©ã—ã¦ãã‚Œã‚‹ã®ã§äº‹å‰ã«å‹å®šç¾©ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒãªã„ã®ã§ä¾¿åˆ©ã§ã™ã€‚

# getStaticPaths

å…ˆç¨‹ã® Page ã«`getStaticPaths`ã‚’è¿½åŠ ã—ã¦ã„ãã¾ã™ã€‚
å‹•çš„ãƒšãƒ¼ã‚¸ç”¨ã®ãƒ‘ã‚¹ã‚’ä½œæˆã—ã€`getStaticProps`ã«`params`ã‚’æ¸¡ã—ã¾ã™ã€‚

```Typescript:[id].tsx
import {
  GetStaticPaths,
  GetStaticProps,
  GetStaticPropsContext,
  InferGetStaticPropsType,
  NextPage,
} from "next";
import getUser from "services";
import getAllUsers from "services";
import { User } from "types";

type TestPageProps = InferGetStaticPropsType<typeof getStaticProps>;

const TestPage: NextPage<TestPageProps> = (props: TestPageProps) => {
  const { id, name, email } = props;

  return (
    <>
      <div>IDï¼š{id}</div>
      <div>ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼š{name}</div>
      <div>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼š{email}</div>
    </>
  );
};

export const getStaticProps: GetStaticProps = async ({
  params,
}: GetStaticPropsContext) => {
  const user: User = getUser(params!.id);

  return {
    props: {
      id: user.id,
      name: user.username,
      email: user.email,
    },
  };
};

export const getStaticPaths: GetStaticPaths = async () => {
  const users: User[] = await getAllUsers();
  const paths = users.map((user) => `/users/${user.id}`);

  return {
    paths,
    fallback: false,
  };
};

export default TestPage;
```

å‹•çš„ãƒšãƒ¼ã‚¸ãªã®ã§ getStaticPaths ã§ãƒ‘ã‚¹é…åˆ—ã‚’å–å¾—ã—ã¦è¿”å´ã™ã‚‹å‹ã‚’`GetStaticPaths`ã«ã™ã‚‹ã“ã¨ã§å®Ÿè£…ã§ãã¾ã™ã€‚

# ã¾ã¨ã‚

ä»Šå›ã¯`getStaticProps`ã¨`getStaticPaths`ã®å‹å®šç¾©ã«ã¤ã„ã¦ã¾ã¨ã‚ã¾ã—ãŸã€‚
å‹å®šç¾©ã«ã¤ã„ã¦ãªã‹ãªã‹æƒ…å ±ã‚‚å°‘ãªã‹ã£ãŸã“ã¨ã‹ã‚‰ Typescript ã§æ›¸ãã“ã¨ãŒé›£ã—ã„ã¨æ„Ÿã˜ã¦ã„ã¾ã—ãŸãŒ Next.js ã§ã¯å¿…é ˆã®æ©Ÿèƒ½ã§ã‚ã‚‹ã®ã§ Typescript ã§ã®æ›¸ãæ–¹ã‚’ç†è§£ã™ã‚‹ã¹ãã‹ã¨æ€ã£ã¦ã„ã¾ã™ã€‚

Next.js ã‚’ã“ã‚Œã‹ã‚‰å­¦ç¿’ã—ã‚ˆã†ã¨ã„ã†æ–¹ã‚‚å¤šã„ã¨ã‚‚ã„ã¾ã™ã®ã§ã“ã®æƒ…å ±ãŒå°‘ã—ã§ã‚‚å‚è€ƒã«ãªã‚Œã°å¬‰ã—ã„ã§ã™ã€‚

# å‚è€ƒè³‡æ–™

https://www.gaji.jp/blog/2021/11/08/8476/
https://zenn.dev/eitches/articles/2021-0424-getstaticprops-type
